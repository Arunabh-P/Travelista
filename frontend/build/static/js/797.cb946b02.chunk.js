"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[797,673],{4673:function(e,n,s){s.r(n),s.d(n,{default:function(){return N}});var t=s(885),r=s(2791),a=s(9434),c=s(4410),i=s(7022),o=s(4686),l=s(3504),u=s(9287),d=s(8326),m=s(6183),h=s(7541),v=s(6488),x=s(7371),f=s(3859),p=s(1421),j=s(7580),g=s(6534),A=s(9323),C=s(184);var N=function(){var e=(0,a.I0)(),n=(0,g.VY)(),s=(0,r.useState)(window.location.pathname),N=(0,t.Z)(s,2),w=N[0],Z=N[1],y=function(){e((0,j.TX)()),n.success("Logged out successfully")};return(0,C.jsx)(c.Z,{expand:"lg",className:" sticky-top  w-100 bg-white  ",children:(0,C.jsxs)(i.Z,{children:[(0,C.jsx)(c.Z.Brand,{style:{fontSize:"30px"},children:(0,C.jsx)(l.rU,{style:{textDecoration:"none",color:"black"},to:"/",children:" Travelista"})}),(0,C.jsx)(c.Z.Toggle,{"aria-controls":"navbarScroll"}),(0,C.jsxs)(c.Z.Collapse,{id:"navbarScroll",children:[(0,C.jsx)(o.Z,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0}),(0,C.jsxs)(o.Z,{children:[(0,C.jsxs)("div",{className:"d-none d-lg-flex",children:[(0,C.jsx)(l.rU,{to:"/",style:{color:"black",paddingLeft:"22.5px"},onClick:function(){return Z("/")},children:"/"===w?(0,C.jsx)(h.Z,{}):(0,C.jsx)(m.Z,{})}),(0,C.jsx)(l.rU,{to:"/search",style:{color:"black",paddingLeft:"22.5px"},onClick:function(){return Z("/search")},children:"/search"===w?(0,C.jsx)(p.Z,{}):(0,C.jsx)(f.Z,{})}),(0,C.jsx)(l.rU,{to:"/messenger",style:{color:"black",paddingLeft:"22.5px"},onClick:function(){return Z("/messenger")},children:"/messenger"===w?(0,C.jsx)(d.Z,{}):(0,C.jsx)(u.Z,{})}),(0,C.jsxs)(A.Z,{style:{color:"black",paddingLeft:"22.5px",marginTop:"-8px"},title:(0,C.jsx)(x.Z,{style:{color:"black"}}),id:"basic-nav-dropdown",children:[(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/account",className:"account-text-header",children:"Account"})}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/update/password",className:"account-text-header",children:"Change Password"})}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/update/profile",className:"account-text-header",children:"Edit Profile"})}),(0,C.jsx)(A.Z.Divider,{}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsxs)("p",{onClick:y,style:{marginBottom:"0"},children:[(0,C.jsx)(v.Z,{})," LogOut"]})})]})]}),(0,C.jsx)("div",{className:"d-lg-none d-flex justify-content-start row",children:(0,C.jsxs)("div",{className:"home-md-icons row",children:[(0,C.jsx)("div",{className:"each-list-icons dropdown-item",children:(0,C.jsxs)(l.rU,{to:"/",style:{color:"black",paddingLeft:"22.5px"},className:"icon-in-header",onClick:function(){return Z("/")},children:["/"===w?(0,C.jsx)(h.Z,{}):(0,C.jsx)(m.Z,{})," Home"]})}),(0,C.jsx)("div",{className:"each-list-icons dropdown-item",children:(0,C.jsxs)(l.rU,{to:"/search",style:{color:"black",paddingLeft:"22.5px"},onClick:function(){return Z("/search")},className:"icon-in-header",children:["/search"===w?(0,C.jsx)(p.Z,{}):(0,C.jsx)(f.Z,{})," Search"]})}),(0,C.jsx)("div",{className:"each-list-icons dropdown-item",children:(0,C.jsxs)(l.rU,{to:"/messenger",style:{color:"black",paddingLeft:"22.5px"},onClick:function(){return Z("/messenger")},className:"icon-in-header",children:["/messenger"===w?(0,C.jsx)(d.Z,{}):(0,C.jsx)(u.Z,{})," Chat"]})}),(0,C.jsx)("div",{className:"each-list-icons",children:(0,C.jsxs)(A.Z,{style:{color:"black",paddingLeft:"22.5px",marginTop:"-8px"},title:"Account",id:"basic-nav-dropdown",children:[(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/account",className:"account-text-header",children:"Account"})}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/update/password",className:"account-text-header",children:"Change Password"})}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsx)(l.rU,{to:"/update/profile",className:"account-text-header",children:"Edit Profile"})}),(0,C.jsx)(A.Z.Divider,{}),(0,C.jsx)(A.Z.Item,{children:(0,C.jsxs)("p",{onClick:y,style:{marginBottom:"0"},children:[(0,C.jsx)(v.Z,{})," LogOut"]})})]})})]})})]})]})]})})}},797:function(e,n,s){s.r(n),s.d(n,{default:function(){return C}});var t=s(5861),r=s(2982),a=s(885),c=s(7757),i=s.n(c),o=s(2791),l=s(4569),u=s.n(l),d=s(9434),m=s(6256),h=s(184);var v=function(e){var n=e.onlineUsers,s=e.currentId,r=e.setCurrentChat,a=(0,d.v9)((function(e){return e.user})).user,c=function(){var e=(0,t.Z)(i().mark((function e(n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/api/v1/conversation/find/".concat(s,"/").concat(n._id));case 3:t=e.sent,a=t.data,r(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"chatOnline",children:[(0,h.jsx)("p",{className:"text-on-online",children:"Online Users"}),n&&n.length>0?null===n||void 0===n?void 0:n.map((function(e){return(0,h.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return c(e)},children:[(0,h.jsxs)("div",{className:"chatOnlineImgContainer",children:[(0,h.jsx)("img",{className:"chatOnlineImg",src:null===e||void 0===e?void 0:e.avatar.url,alt:"online friend avatar"}),(0,h.jsx)("div",{className:"chatOnlineBadge"})]}),(0,h.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.name})]},e._id)})):(0,h.jsxs)("p",{style:{color:"rgb(118, 118, 124)"},children:[(0,h.jsx)(m.Z,{})," ",(0,h.jsx)("span",{className:"no-one-online",children:"Oops.. everyone is having a break time!"})," "]})]}),(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"chatOnline",children:[(0,h.jsx)("p",{className:"text-on-online mt-2",children:"Friends list"}),a&&a.following.length>0?a.following.map((function(e){return(0,h.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return c(e)},children:[(0,h.jsx)("div",{className:"chatOnlineImgContainer",children:(0,h.jsx)("img",{className:"chatOnlineImg",src:e.avatar.url,alt:""})}),(0,h.jsx)("span",{className:"chatOnlineName",children:e.name})]})})):(0,h.jsx)("p",{style:{margin:"2vmax"},children:" You're not following anyone"})]})})]})};var x=function(e){var n=e.conversation,s=e.currentUser,r=(0,o.useState)(null),c=(0,a.Z)(r,2),l=c[0],d=c[1];return(0,o.useEffect)((function(){var e=n.members.find((function(e){return e!==s._id})),r=function(){var n=(0,t.Z)(i().mark((function n(){var s,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u()("/api/v1/user/".concat(e));case 3:s=n.sent,t=s.data,d(t.user),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();r()}),[s,n]),(0,h.jsxs)("div",{className:"conversation",children:[(0,h.jsx)("img",{className:"conversationImg",src:l&&l.avatar.url,alt:""}),(0,h.jsx)("span",{className:"conversationName",children:l&&l.name})]})},f=s(6314);var p=function(e){var n=e.message,s=e.own;return(0,h.jsxs)("div",{className:s?"message own":"message",children:[(0,h.jsxs)("div",{className:"messageTop",children:[(0,h.jsx)("img",{className:"messageImg",src:null===n||void 0===n?void 0:n.sender.avatar.url,alt:""}),(0,h.jsx)("p",{className:"messageText",children:n.text})]}),(0,h.jsx)("div",{className:"messageBottom",children:(0,f.WU)(n.createdAt)})]})},j=s(9609),g=s(4673),A="data:image/png;base64,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";var C=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),s=n[0],c=n[1],l=(0,o.useState)(null),m=(0,a.Z)(l,2),f=m[0],C=m[1],N=(0,o.useState)([]),w=(0,a.Z)(N,2),Z=w[0],y=w[1],M=(0,o.useState)(""),X=(0,a.Z)(M,2),B=X[0],E=X[1],I=(0,o.useState)(null),k=(0,a.Z)(I,2),F=k[0],b=k[1],R=(0,o.useState)(null),q=(0,a.Z)(R,2),z=q[0],P=q[1],S=(0,o.useRef)((0,j.io)("https://trvalista.online")),U=(0,o.useRef)(),O=(0,d.v9)((function(e){return e.user})).user;(0,o.useEffect)((function(){return S.current=(0,j.io)("https://travalista.online"),S.current.on("getMessage",(function(e){b({sender:e.sender,text:e.text,createdAt:Date.now()})})),function(){S.current.close()}}),[S]),(0,o.useEffect)((function(){F&&(null===f||void 0===f?void 0:f.members.includes(F.sender._id))&&y((function(e){return[].concat((0,r.Z)(e),[F])}))}),[F,f]),(0,o.useEffect)((function(){S.current.emit("addUser",O._id),S.current.on("getUsers",(function(e){e=JSON.parse(e),P(O.following.filter((function(n){return e.some((function(e){return e.userId===n._id}))})))}))}),[O.following,O._id]),(0,o.useEffect)((function(){var e=function(){var e=(0,t.Z)(i().mark((function e(){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/api/v1/conversation/".concat(O._id));case 3:n=e.sent,s=n.data,c(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[O._id]),(0,o.useEffect)((function(){var e=function(){var e=(0,t.Z)(i().mark((function e(){var n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/api/v1/message/".concat(null===f||void 0===f?void 0:f._id));case 3:n=e.sent,s=n.data,y(s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[f]);var V=function(){var e=(0,t.Z)(i().mark((function e(n){var s,t,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s={sender:O,text:B,conversationId:f._id},t=f.members.find((function(e){return e!==O._id})),S.current.emit("sendMessage",{senderId:{avatar:O.avatar,_id:O._id},receiverId:t,text:B}),e.prev=4,e.next=7,u().post("/api/v1/message",s);case 7:a=e.sent,c=a.data,y([].concat((0,r.Z)(Z),[c])),E(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e;null===(e=U.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[Z]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.default,{}),(0,h.jsx)("div",{className:"body-messager pt-2 ",children:(0,h.jsxs)("div",{className:"messenger  container",children:[(0,h.jsx)("div",{className:"chatMenu d-none d-sm-block col-2",children:(0,h.jsxs)("div",{className:"chatMenuWrapper",children:[(0,h.jsx)("h5",{children:"Recent Chats"}),s.map((function(e){return(0,h.jsx)("div",{onClick:function(){return C(e)},children:(0,h.jsx)(x,{conversation:e,currentUser:O})},e._id)}))]})}),(0,h.jsx)("div",{className:"chatBox col-sm-8",children:(0,h.jsx)("div",{className:"chatBoxWrapper",children:f?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"chatBoxTop",children:Z.map((function(e){return(0,h.jsx)("div",{ref:U,children:(0,h.jsx)(p,{message:e,own:e.sender._id===O._id})},e._id)}))}),(0,h.jsxs)("div",{className:"chatBoxBottom",children:[(0,h.jsx)("input",{type:"text",className:"chatMessageInput",placeholder:"write something...",onChange:function(e){return E(e.target.value)},value:B,onKeyPress:function(e){"Enter"===e.key&&V(e)}}),B.length<1?(0,h.jsx)("button",{className:"chatSubmitButton",children:(0,h.jsx)("img",{src:A,alt:""})}):(0,h.jsx)("button",{className:"chatSubmitButton",onClick:V,children:(0,h.jsx)("img",{src:A,alt:""})})]})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("p",{className:"noConversationText",children:"Open a conversation to start a chat."})})})}),(0,h.jsx)("div",{className:"chatOnline col-4 col-sm-2",children:(0,h.jsx)("div",{className:"chatOnlineWrapper",children:(0,h.jsx)(v,{onlineUsers:z&&z,currentId:O._id,setCurrentChat:C})})})]})})]})}}}]);
//# sourceMappingURL=797.cb946b02.chunk.js.map