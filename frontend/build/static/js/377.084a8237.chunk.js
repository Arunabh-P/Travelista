"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[377],{1294:function(e,t,s){s.r(t),s.d(t,{default:function(){return L}});var r=s(2791),a=s(2982),n=s(890),i=s(12),c=s(9434),l=s(7047),o=s(184);var d=function(){var e,t=(0,c.v9)((function(e){return e.allUsers})),s=t.users,r=t.loading,d=(0,c.v9)((function(e){return e.user})).user;return void 0!==s&&(e=s.filter((function(e){if(!e.followers.includes(d._id)&&e._id!==d._id)return e}))),(0,o.jsxs)("div",{className:"users-list-to-show",children:[(0,o.jsx)("h4",{children:"Connect with travelista family"}),r&&(0,a.Z)(Array(12)).map((function(){return(0,o.jsx)("div",{className:"row d-flex ",children:(0,o.jsx)("div",{className:"col-8",children:(0,o.jsxs)("div",{className:"users-home-list",children:[(0,o.jsx)(l.Z,{variant:"circular",className:"user-home-list-avatar"}),(0,o.jsx)(l.Z,{variant:"text",width:280})]})})})})),e&&e.length>0?e.sort((function(){return Math.random()-.5})).slice(0,7).map((function(e){return(0,o.jsx)(i.Z,{userId:e._id,name:e.name,avatar:e.avatar.url},e._id)})):(0,o.jsx)(n.Z,{variant:"h6",children:"No Users yet"})]})},u=s(3096),m=s(1410),h=s(7580),x=s(885),f=s(1902),g=s(6534),p=s(5861),v=s(7757),j=s.n(v),w=s(4569),y=s.n(w),N=s(7022),b=s(2677),Z=s(3360),k=s(4957);s(5580);function F(e,t,s){var r=document.createElement("canvas"),a=e.naturalWidth/e.width,n=e.naturalHeight/e.height;r.width=t.width,r.height=t.height;var i=r.getContext("2d"),c=window.devicePixelRatio;return r.width=t.width*c,r.height=t.height*c,i.setTransform(c,0,0,c,0,0),i.imageSmoothingQuality="high",i.drawImage(e,t.x*a,t.y*n,t.width*a,t.height*n,0,0,t.width,t.height),r.toDataURL("image/jpeg")}var I=function(e){var t=e.src,s=e.imageCallback,a=e.closeHander,n=(0,r.useRef)(null),i=(0,r.useRef)(null),c=function(){var e=(0,p.Z)(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(n.current,i.current,t.name);case 2:r=e.sent,s(r);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)("div",{className:"position-fixed ",style:{zIndex:9999,top:"2rem",left:"2rem",minWidth:"24rem",maxWidth:"40rem"},children:(0,o.jsx)(N.Z,{className:" text-center bg-white shadow rounded-2 mx-auto p-2 m-0",children:(0,o.jsxs)(b.Z,{xs:12,className:"text-center  ",children:[(0,o.jsx)(k.Z,{src:t?URL.createObjectURL(t):"",className:"image-fulid",style:{height:"500px"},aspectRatio:.5625,guides:!1,crop:function(e){return i.current=e.detail},ref:n,zoomable:!0,movable:!1,minCropBoxWidth:200,minCropBoxHeight:250}),(0,o.jsx)("div",{className:"text-center"}),(0,o.jsxs)("div",{className:"px-auto py-2 text-center",children:[(0,o.jsx)(Z.Z,{type:"button",className:"btn-danger us-btn-danger mx-1",style:{width:"fit-content"},onClick:a,children:"Cancel"}),(0,o.jsx)(Z.Z,{type:"button",className:"us-btn mx-1",style:{width:"fit-content"},onClick:c,children:"Crop"})]})]})})})};var C=function(){var e=(0,r.useState)(null),t=(0,x.Z)(e,2),s=t[0],a=t[1],n=(0,c.I0)(),i=(0,g.VY)(),l=(0,c.v9)((function(e){return e.like})),d=l.error,u=l.message,m=(0,r.useState)(!1),v=(0,x.Z)(m,2),w=v[0],N=v[1],b=(0,r.useState)(!1),Z=(0,x.Z)(b,2),k=Z[0],F=Z[1],C=(0,c.v9)((function(e){return e.user})).user;return(0,r.useEffect)((function(){null!==s&&(n(function(e){return function(){var t=(0,p.Z)(j().mark((function t(s){var r,a;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s({type:"newStoryRequest"}),t.next=4,y().post("/api/v1/story/upload",{image:e},{headers:{"Content-type":"application/json"}});case 4:r=t.sent,a=r.data,console.log(a),s({type:"newStorySuccess",payload:a.message}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),s({type:"newStoryFailure ",payload:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(s)),n((0,h.II)())),d&&(i.error(d),n({type:"clearErrors"})),u&&(i.success(u),n({type:"clearErrors"}))}),[n,d,u,s,i]),(0,o.jsx)("div",{className:" add-story-box  p-0 ",children:(0,o.jsxs)("form",{children:[(0,o.jsx)("input",{type:"file",accept:"image/*",className:"crop_image d-none",name:"crop_image",id:"upload_image",onChange:function(e){F(e.target.files[0]),N(!0)}}),(0,o.jsx)("div",{style:{backgroundImage:"url(".concat(C.avatar.url,")")},className:"add-story-img m-0 p-0 sh col-12 mb-auto"}),(0,o.jsxs)("div",{className:" p-3 d-flex justify-content-center plus-Button-add-story",children:[(0,o.jsx)("label",{htmlFor:"upload_image",children:(0,o.jsx)("span",{className:"profilepic__icon",children:(0,o.jsx)(f.Z,{sx:{fontSize:50},className:"bg-white rounded-circle p-2"})})}),w&&(0,o.jsx)("div",{className:"d-flex justify-content-center",children:(0,o.jsx)(I,{src:k,imageCallback:function(e){a(e),N(!1)},closeHander:function(){N(!1)}})})]})]})})},S=s(829),_=s(3187),E=s.p+"static/media/emptyStory.6847113a1875c1ecc3e5.gif";var A=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.storyOfFollowing})),s=t.stories,n=t.loading,i=(0,r.useState)(!1),d=(0,x.Z)(i,2),u=d[0],m=d[1];(0,r.useEffect)((function(){e((0,h.Gd)()),e((0,h.AW)())}),[e]);var f=(0,r.useState)({}),g=(0,x.Z)(f,2),p=g[0],v=g[1];return(0,o.jsxs)(o.Fragment,{children:[n&&(0,a.Z)(Array(5)).map((function(){return(0,o.jsx)("div",{className:"story-list ",children:(0,o.jsx)(l.Z,{variant:"rectangular",sx:{bgcolor:"#FFFFFF"},className:"followers-all-stories"})})})),s&&s.length>0?s.map((function(e,t){return(0,o.jsx)("div",{className:"story-list ",children:(0,o.jsxs)("div",{onClick:function(){return function(e){var t=s[e];v(t),m(!u)}(t)},style:{backgroundImage:"url(".concat(e.image.url,")")},className:"followers-all-stories",children:[(0,o.jsx)("div",{className:"avatar-img",children:(0,o.jsx)(S.ZP,{size:"lg",className:"story-follower-avatar",src:e.owner.avatar.url,color:"gradient",bordered:!0})}),(0,o.jsx)("h4",{className:"story-follower-name",children:e.owner.name})]})},e._id)})):(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"story-list ",children:(0,o.jsx)("div",{style:{backgroundImage:"url(".concat(E,")")},className:"followers-all-stories",children:(0,o.jsx)("h4",{className:"no-story-text",children:"No stories yet"})})})}),(0,o.jsx)(_.Z,{open:u,onClose:function(){return m(!u)},children:(0,o.jsx)("div",{className:"DialogBoxStory",children:Object.keys(p).length>0?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:{backgroundImage:"url(".concat(p.image.url,")")},className:"single-story-img ",children:[(0,o.jsx)("div",{className:"avatar-img",children:(0,o.jsx)(S.ZP,{size:"lg",className:"story-follower-avatar",src:p.owner.avatar.url,color:"gradient",bordered:!0})}),(0,o.jsx)("h4",{className:"single-story-follower-name",children:p.owner.name})]})}):""})})]})};var R=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.addStory})),s=t.error,a=t.message,n=(0,g.VY)();return(0,r.useEffect)((function(){s&&(n.error(s),e({type:"clearErrors"})),a&&(n.success(a),e({type:"clearErrors"}))}),[e,s,a,n]),(0,o.jsx)("div",{className:"row mb-2 all-stories-in-the-home-page mx-1",style:{overflowX:"scroll"},children:(0,o.jsxs)("div",{className:"col-12 add-story-home stories-in-home p-0 d-flex",children:[(0,o.jsx)(C,{}),(0,o.jsx)(A,{})]})})},z=s.p+"static/media/nopostyet.c6725f67a51b398604dd.jpg";var D=function(e){var t=e.width,s=(0,c.I0)(),n=(0,c.v9)((function(e){return e.postOfFollowing})),i=n.posts,d=n.loading;return(0,r.useEffect)((function(){s((0,h.KY)()),s((0,h.AW)())}),[s]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R,{}),(0,o.jsx)(u.default,{}),d&&(0,a.Z)(Array(5)).map((function(){return(0,o.jsxs)("div",{className:"pointer",children:[(0,o.jsx)(l.Z,{variant:"rectangular",sx:{bgcolor:"#FFFFFF"},width:t,height:"198px"}),(0,o.jsxs)("div",{className:"latest-title",style:{width:t},children:[(0,o.jsx)(l.Z,{height:"35px"}),(0,o.jsx)(l.Z,{width:"80%",height:"35px"})]}),(0,o.jsx)("div",{className:"latest-cat mt-2 mb-4",children:(0,o.jsx)(l.Z,{width:"50%"})}),(0,o.jsx)("div",{className:"latest-line"})]})})),i&&i.length>0?i.map((function(e){return(0,o.jsx)(m.Z,{host:e.host,buddy:e.buddy,postId:e._id,caption:e.caption,postImage:e.image.url,tripDate:e.tripDate,createdAt:e.createdAt,likes:e.likes,comments:e.comments,ownerImage:e.owner.avatar.url,ownerName:e.owner.name,ownerId:e.owner._id,width:"100%"},e._id)})):(0,o.jsx)("div",{className:"col-12",children:(0,o.jsx)("img",{src:z,alt:"",className:"no-post-yet"})})]})},H=s(3044),P=s(8938),U=s.p+"static/media/widget.54bd66862a07b39e309b.gif",W=s.p+"static/media/wave.ba835cc7437ec070c6ab.gif";var B=function(){var e=(0,c.v9)((function(e){return e.user})).user,t=(0,r.useState)(""),s=(0,x.Z)(t,2),a=s[0],n=s[1];return(0,r.useEffect)((function(){!function(){var e=(new Date).getHours();e>0&&e<12?n("Good Morning"):e>=12&&e<16?n("Good Afternoon"):e>=16&&e<21?n("Good Evening"):e>=21&&e<24&&n("Good Night")}()}),[]),(0,o.jsxs)("div",{className:"user-card-for-side ",children:[(0,o.jsx)("div",{className:"user-card",children:(0,o.jsxs)("div",{className:"user-card-top",children:[(0,o.jsx)("img",{src:e.coverImage?e.coverImage.url:P,alt:"cover"}),(0,o.jsx)(H.Z,{src:e.avatar.url,className:"user-card-avatar"}),(0,o.jsx)("h2",{style:{textTransform:"capitalize"},children:e.name}),(0,o.jsx)("h4",{style:{textTransform:"capitalize"},children:e.bio})]})}),(0,o.jsxs)("div",{className:"user-followers-list d-none d-md-block",children:[(0,o.jsx)("img",{src:U,className:"pt-3 widget-card",alt:"widget"}),(0,o.jsxs)("h3",{className:"pt-3",children:["Hi ",(0,o.jsxs)("span",{style:{textTransform:"capitalize"},children:[e.name,","]})]}),(0,o.jsxs)("h4",{children:[a,"!"]}),(0,o.jsx)("img",{src:W,className:"pt-3  wave-card",alt:"wave"})]})]})},G=s(4673);var L=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G.default,{}),(0,o.jsx)("div",{className:" w-100 home-page fullBodyHome",children:(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-4 col-lg-3 home-left",children:(0,o.jsx)(B,{})}),(0,o.jsx)("div",{className:"col-md-8 col-lg-6 home-center",children:(0,o.jsx)(D,{})}),(0,o.jsx)("div",{className:"col-lg-3 home-right d-none d-lg-block",children:(0,o.jsx)(d,{})})]})})})]})}},3096:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var r=s(5861),a=s(885),n=s(7757),i=s.n(n),c=s(2791),l=s(6151),o=s(3187),d=s(890),u=s(9434),m=s(4635),h=s(7580),x=s(9140),f=s(184);var g=function(){var e=(0,c.useState)(null),t=(0,a.Z)(e,2),s=t[0],n=t[1],g=(0,c.useState)(""),p=(0,a.Z)(g,2),v=p[0],j=p[1],w=(0,c.useState)(""),y=(0,a.Z)(w,2),N=y[0],b=y[1],Z=(0,u.I0)(),k=(0,c.useState)(!1),F=(0,a.Z)(k,2),I=F[0],C=F[1],S=(0,u.v9)((function(e){return e.like})).loading,_=function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Z((0,m.ed)(v,s,N));case 3:Z((0,h.II)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"add-a-new-post",children:(0,f.jsxs)(l.Z,{className:"add-new-post-button",style:{color:"rgba(0, 0, 0, 0.767)"},onClick:function(){return C(!I)},children:["Add post ",(0,f.jsx)(x.Z,{})]})}),(0,f.jsx)(o.Z,{open:I,onClose:function(){return C(!I)},children:(0,f.jsx)("div",{className:"newPost",children:(0,f.jsxs)("form",{className:"newPostForm",onSubmit:_,children:[(0,f.jsx)(d.Z,{varient:"h3",children:"New Post"}),s&&(0,f.jsx)("img",{src:s,alt:"postImage"}),(0,f.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],s=new FileReader;s.readAsDataURL(t),s.onload=function(){2===s.readyState&&n(s.result)}}}),(0,f.jsx)("input",{type:"text",placeholder:"Caption...",value:v,onChange:function(e){return j(e.target.value)}}),(0,f.jsx)("input",{type:"date",value:N,onChange:function(e){return b(e.target.value)}}),(0,f.jsx)(l.Z,{disabled:S,type:"submit",children:"Post"})]})})})]})}},8938:function(e,t,s){e.exports=s.p+"static/media/coverimg.6d17ecbcc53fecd9cd51.png"}}]);
//# sourceMappingURL=377.084a8237.chunk.js.map