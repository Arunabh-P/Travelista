"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[377],{1294:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var s=r(2791),a=r(2982),n=r(890),i=r(12),c=r(9434),o=r(7047),l=r(184);var d=function(){var e,t=(0,c.v9)((function(e){return e.allUsers})),r=t.users,s=t.loading,d=(0,c.v9)((function(e){return e.user})).user;return void 0!==r&&(e=r.filter((function(e){if(!e.followers.includes(d._id)&&e._id!==d._id)return e}))),(0,l.jsxs)("div",{className:"users-list-to-show",children:[(0,l.jsx)("h4",{children:"Connect with travelista family"}),s&&(0,a.Z)(Array(12)).map((function(){return(0,l.jsx)("div",{className:"row d-flex ",children:(0,l.jsx)("div",{className:"col-8",children:(0,l.jsxs)("div",{className:"users-home-list",children:[(0,l.jsx)(o.Z,{variant:"circular",className:"user-home-list-avatar"}),(0,l.jsx)(o.Z,{variant:"text",width:280})]})})})})),e&&e.length>0?e.sort((function(){return Math.random()-.5})).slice(0,7).map((function(e){return(0,l.jsx)(i.Z,{userId:e._id,name:e.name,avatar:e.avatar.url},e._id)})):(0,l.jsx)(n.Z,{variant:"h6",children:"No Users yet"})]})},u=r(3096),m=r(1410),h=r(7580),f=r(885),x=r(1902),g=r(6534),p=r(5861),v=r(7757),j=r.n(v),y=r(4569),w=r.n(y),N=r(7022),b=r(2677),Z=r(3360),k=r(4957);r(5580);function I(e,t,r){var s=document.createElement("canvas"),a=e.naturalWidth/e.width,n=e.naturalHeight/e.height;s.width=t.width,s.height=t.height;var i=s.getContext("2d"),c=window.devicePixelRatio;return s.width=t.width*c,s.height=t.height*c,i.setTransform(c,0,0,c,0,0),i.imageSmoothingQuality="high",i.drawImage(e,t.x*a,t.y*n,t.width*a,t.height*n,0,0,t.width,t.height),s.toDataURL("image/jpeg")}var C=function(e){var t=e.src,r=e.imageCallback,a=e.closeHander,n=(0,s.useRef)(null),i=(0,s.useRef)(null),c=function(){var e=(0,p.Z)(j().mark((function e(){var s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(n.current,i.current,t.name);case 2:s=e.sent,r(s);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsx)("div",{className:"position-fixed ",style:{zIndex:9999,top:"2rem",left:"2rem",minWidth:"24rem",maxWidth:"40rem"},children:(0,l.jsx)(N.Z,{className:" text-center bg-white shadow rounded-2 mx-auto p-2 m-0",children:(0,l.jsxs)(b.Z,{xs:12,className:"text-center  ",children:[(0,l.jsx)(k.Z,{src:t?URL.createObjectURL(t):"",className:"image-fulid",style:{height:"500px"},aspectRatio:.5625,guides:!1,crop:function(e){return i.current=e.detail},ref:n,zoomable:!0,movable:!1,minCropBoxWidth:200,minCropBoxHeight:250}),(0,l.jsx)("div",{className:"text-center"}),(0,l.jsxs)("div",{className:"px-auto py-2 text-center",children:[(0,l.jsx)(Z.Z,{type:"button",className:"btn-danger us-btn-danger mx-1",style:{width:"fit-content"},onClick:a,children:"Cancel"}),(0,l.jsx)(Z.Z,{type:"button",className:"us-btn mx-1",style:{width:"fit-content"},onClick:c,children:"Crop"})]})]})})})};var S=function(){var e=(0,s.useState)(null),t=(0,f.Z)(e,2),r=t[0],a=t[1],n=(0,c.I0)(),i=(0,g.VY)(),o=(0,c.v9)((function(e){return e.like})),d=o.error,u=o.message,m=(0,s.useState)(!1),v=(0,f.Z)(m,2),y=v[0],N=v[1],b=(0,s.useState)(!1),Z=(0,f.Z)(b,2),k=Z[0],I=Z[1],S=(0,c.v9)((function(e){return e.user})).user;return(0,s.useEffect)((function(){null!==r&&(n(function(e){return function(){var t=(0,p.Z)(j().mark((function t(r){var s,a;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:"newStoryRequest"}),t.next=4,w().post("/api/v1/story/upload",{image:e},{headers:{"Content-type":"application/json"}});case 4:s=t.sent,a=s.data,console.log(a),r({type:"newStorySuccess",payload:a.message}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),r({type:"newStoryFailure ",payload:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(r)),n((0,h.II)())),d&&(i.error(d),n({type:"clearErrors"})),u&&(i.success(u),n({type:"clearErrors"}))}),[n,d,u,r,i]),(0,l.jsx)("div",{className:" add-story-box  p-0 ",children:(0,l.jsxs)("form",{children:[(0,l.jsx)("input",{type:"file",accept:"image/*",className:"crop_image d-none",name:"crop_image",id:"upload_image",onChange:function(e){I(e.target.files[0]),N(!0)}}),(0,l.jsx)("div",{style:{backgroundImage:"url(".concat(S.avatar.url,")")},className:"add-story-img m-0 p-0 sh col-12 mb-auto"}),(0,l.jsxs)("div",{className:" p-3 d-flex justify-content-center plus-Button-add-story",children:[(0,l.jsx)("label",{htmlFor:"upload_image",children:(0,l.jsx)("span",{className:"profilepic__icon",children:(0,l.jsx)(x.Z,{sx:{fontSize:50},className:"bg-white rounded-circle p-2"})})}),y&&(0,l.jsx)("div",{className:"d-flex justify-content-center",children:(0,l.jsx)(C,{src:k,imageCallback:function(e){a(e),N(!1)},closeHander:function(){N(!1)}})})]})]})})},F=r(829),_=r(3187),E=r.p+"static/media/emptyStory.6847113a1875c1ecc3e5.gif";var R=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.storyOfFollowing})),r=t.stories,n=t.loading,i=(0,s.useState)(!1),d=(0,f.Z)(i,2),u=d[0],m=d[1];(0,s.useEffect)((function(){e((0,h.Gd)()),e((0,h.AW)())}),[e]);var x=(0,s.useState)({}),g=(0,f.Z)(x,2),p=g[0],v=g[1];return(0,l.jsxs)(l.Fragment,{children:[n&&(0,a.Z)(Array(5)).map((function(){return(0,l.jsx)("div",{className:"story-list ",children:(0,l.jsx)(o.Z,{variant:"rectangular",sx:{bgcolor:"#FFFFFF"},className:"followers-all-stories"})})})),r&&r.length>0?r.map((function(e,t){return(0,l.jsx)("div",{className:"story-list ",children:(0,l.jsxs)("div",{onClick:function(){return function(e){var t=r[e];v(t),m(!u)}(t)},style:{backgroundImage:"url(".concat(e.image.url,")")},className:"followers-all-stories",children:[(0,l.jsx)("div",{className:"avatar-img",children:(0,l.jsx)(F.ZP,{size:"lg",className:"story-follower-avatar",src:e.owner.avatar.url,color:"gradient",bordered:!0})}),(0,l.jsx)("h4",{className:"story-follower-name",children:e.owner.name})]})},e._id)})):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"story-list ",children:(0,l.jsx)("div",{style:{backgroundImage:"url(".concat(E,")")},className:"followers-all-stories",children:(0,l.jsx)("h4",{className:"no-story-text",children:"No stories yet"})})})}),(0,l.jsx)(_.Z,{open:u,onClose:function(){return m(!u)},children:(0,l.jsx)("div",{className:"DialogBoxStory",children:Object.keys(p).length>0?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{style:{backgroundImage:"url(".concat(p.image.url,")")},className:"single-story-img ",children:[(0,l.jsx)("div",{className:"avatar-img",children:(0,l.jsx)(F.ZP,{size:"lg",className:"story-follower-avatar",src:p.owner.avatar.url,color:"gradient",bordered:!0})}),(0,l.jsx)("h4",{className:"single-story-follower-name",children:p.owner.name})]})}):""})})]})};var A=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.addStory})),r=t.error,a=t.message,n=(0,g.VY)();return(0,s.useEffect)((function(){r&&(n.error(r),e({type:"clearErrors"})),a&&(n.success(a),e({type:"clearErrors"}))}),[e,r,a,n]),(0,l.jsx)("div",{className:"row mb-2 all-stories-in-the-home-page mx-1",style:{overflowX:"scroll"},children:(0,l.jsxs)("div",{className:"col-12 add-story-home stories-in-home p-0 d-flex",children:[(0,l.jsx)(S,{}),(0,l.jsx)(R,{})]})})},z=r.p+"static/media/nopostyet.c6725f67a51b398604dd.jpg";var D=function(e){e.width;var t=(0,c.I0)(),r=(0,c.v9)((function(e){return e.postOfFollowing})),a=r.posts;return r.loading,(0,s.useEffect)((function(){t((0,h.KY)()),t((0,h.AW)())}),[t]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A,{}),(0,l.jsx)(u.default,{}),a&&a.length>0?a.map((function(e){return(0,l.jsx)(m.Z,{host:e.host,buddy:e.buddy,postId:e._id,caption:e.caption,postImage:e.image.url,tripDate:e.tripDate,createdAt:e.createdAt,likes:e.likes,comments:e.comments,ownerImage:e.owner.avatar.url,ownerName:e.owner.name,ownerId:e.owner._id,width:"100%"},e._id)})):(0,l.jsx)("div",{className:"col-12",children:(0,l.jsx)("img",{src:z,alt:"",className:"no-post-yet"})})]})},H=r(3044),P=r(8938),U=r.p+"static/media/widget.54bd66862a07b39e309b.gif",W=r.p+"static/media/wave.ba835cc7437ec070c6ab.gif";var B=function(){var e=(0,c.v9)((function(e){return e.user})).user,t=(0,s.useState)(""),r=(0,f.Z)(t,2),a=r[0],n=r[1];return(0,s.useEffect)((function(){!function(){var e=(new Date).getHours();e>0&&e<12?n("Good Morning"):e>=12&&e<16?n("Good Afternoon"):e>=16&&e<21?n("Good Evening"):e>=21&&e<24&&n("Good Night")}()}),[]),(0,l.jsxs)("div",{className:"user-card-for-side ",children:[(0,l.jsx)("div",{className:"user-card",children:(0,l.jsxs)("div",{className:"user-card-top",children:[(0,l.jsx)("img",{src:e.coverImage?e.coverImage.url:P,alt:"cover"}),(0,l.jsx)(H.Z,{src:e.avatar.url,className:"user-card-avatar"}),(0,l.jsx)("h2",{style:{textTransform:"capitalize"},children:e.name}),(0,l.jsx)("h4",{style:{textTransform:"capitalize"},children:e.bio})]})}),(0,l.jsxs)("div",{className:"user-followers-list d-none d-md-block",children:[(0,l.jsx)("img",{src:U,className:"pt-3 widget-card",alt:"widget"}),(0,l.jsxs)("h3",{className:"pt-3",children:["Hi ",(0,l.jsxs)("span",{style:{textTransform:"capitalize"},children:[e.name,","]})]}),(0,l.jsxs)("h4",{children:[a,"!"]}),(0,l.jsx)("img",{src:W,className:"pt-3  wave-card",alt:"wave"})]})]})},G=r(4673);var L=function(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.default,{}),(0,l.jsx)("div",{className:" w-100 home-page fullBodyHome",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-md-4 col-lg-3 home-left",children:(0,l.jsx)(B,{})}),(0,l.jsx)("div",{className:"col-md-8 col-lg-6 home-center",children:(0,l.jsx)(D,{})}),(0,l.jsx)("div",{className:"col-lg-3 home-right d-none d-lg-block",children:(0,l.jsx)(d,{})})]})})})]})}},3096:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var s=r(5861),a=r(885),n=r(7757),i=r.n(n),c=r(2791),o=r(6151),l=r(3187),d=r(890),u=r(9434),m=r(4635),h=r(7580),f=r(9140),x=r(184);var g=function(){var e=(0,c.useState)(null),t=(0,a.Z)(e,2),r=t[0],n=t[1],g=(0,c.useState)(""),p=(0,a.Z)(g,2),v=p[0],j=p[1],y=(0,c.useState)(""),w=(0,a.Z)(y,2),N=w[0],b=w[1],Z=(0,u.I0)(),k=(0,c.useState)(!1),I=(0,a.Z)(k,2),C=I[0],S=I[1],F=(0,u.v9)((function(e){return e.like})).loading,_=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Z((0,m.ed)(v,r,N));case 3:Z((0,h.II)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"add-a-new-post",children:(0,x.jsxs)(o.Z,{className:"add-new-post-button",style:{color:"rgba(0, 0, 0, 0.767)"},onClick:function(){return S(!C)},children:["Add post ",(0,x.jsx)(f.Z,{})]})}),(0,x.jsx)(l.Z,{open:C,onClose:function(){return S(!C)},children:(0,x.jsx)("div",{className:"newPost",children:(0,x.jsxs)("form",{className:"newPostForm",onSubmit:_,children:[(0,x.jsx)(d.Z,{varient:"h3",children:"New Post"}),r&&(0,x.jsx)("img",{src:r,alt:"postImage"}),(0,x.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(t),r.onload=function(){2===r.readyState&&n(r.result)}}}),(0,x.jsx)("input",{type:"text",placeholder:"Caption...",value:v,onChange:function(e){return j(e.target.value)}}),(0,x.jsx)("input",{type:"date",value:N,onChange:function(e){return b(e.target.value)}}),(0,x.jsx)(o.Z,{disabled:F,type:"submit",children:"Post"})]})})})]})}},8938:function(e,t,r){e.exports=r.p+"static/media/coverimg.6d17ecbcc53fecd9cd51.png"}}]);
//# sourceMappingURL=377.c543cc02.chunk.js.map